<!doctype html>
<title>Ramona</title>
<script src="./node_modules/mithril/mithril.min.js"></script>
<script>
  // main component used to namespace the app
  var ramona = {};

  // the Album class
  ramona.Album = function(data) {
    this.spotifyId = m.prop(data.spotifyId);
    // This needs to be obtained from the spotify api, so I guess:
    // - call spotify API on init passing the id
    // - fill this properties
    this.artist = m.prop(data.artist);
    this.title = m.prop(data.title);
    this.cover = m.prop(data.cover);
  }

  // the albums collection, this needs to take an user id as an argument and\
  // retrieve her saved albums from spotify
  ramona.AlbumList = Array;

  // define the view-model
  ramona.vm = {
    init: function() {
      // A running list of albums, later we pass the user id
      ramona.vm.list = new ramona.AlbumList();

      // adds an album to the list
      ramona.vm.add = function(album) {
        // we'd to check if the album is properly formatted if we are going
        // to keep this, I doubt it so I'm not doing it for now
        // Also it's probably better to handle it in the model
        ramona.vm.list.push(new ramona.Album(album))
      }
    }
  };

//initialize our view-model
ramona.vm.init();

// create an album by hand later we need to create this from an
// spotify id
var frankBlackFirst = {
  spotifyId: "5Q8gM5SMBT2LAoZ5LzqAvH",
  artist: "Frank Black",
  title: "Frank Black",
  cover: "https://i.scdn.co/image/b392026893317c09efcf42b49d7015d1972551fe"
};

// add the album to the view-model list
ramona.vm.add(frankBlackFirst);

</script>
